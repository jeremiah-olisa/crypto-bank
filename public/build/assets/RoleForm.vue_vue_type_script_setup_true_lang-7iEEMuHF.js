import{d as A,h as N,o as d,j as _,a as c,b as e,u as a,w as r,e as n,F as g,y as C,f as V,t as b,p as B,s as D,c as S,k as F}from"./app-BHyH27ko.js";import{c as M,a as $,f as P,_ as h,e as j,d as z}from"./index.esm-D3ndie9c.js";import{_ as L}from"./InputError.vue_vue_type_script_setup_true_lang-B0JBTor2.js";import{_ as T}from"./Button.vue_vue_type_script_setup_true_lang-DbNPouGf.js";import{_ as G}from"./Switch.vue_vue_type_script_setup_true_lang-C0vFT6fL.js";import{a as H,b as x,e as k,c as I,_ as J,d as w}from"./TableHeader.vue_vue_type_script_setup_true_lang-DSBOmhP1.js";import{t as K,p as O}from"./index-DdcOqEHE.js";import{b as Q}from"./index-SwP8ybTE.js";const W={class:"col-span-2 flex flex-col gap-3"},X={class:"overflow-x-auto"},ne=A({__name:"RoleForm",props:{role:{}},setup(v){const t=v,y=N(()=>!!(t!=null&&t.role)),m=[{id:1,name:"View Users",description:"Allows viewing the user list."},{id:2,name:"Edit Users",description:"Allows editing user details."},{id:3,name:"Delete Users",description:"Allows deleting user accounts."},{id:4,name:"Manage Roles",description:"Allows managing roles and permissions."}],E=M({name:$().required("Role Name is required"),description:$().required("Role Description is required"),permissions:P().required("Role Permission is required")}),s=Q({name:"",description:"",permissions:m.map(f=>({id:f.id,granted:!1}))},{schema:E}),R=()=>{s.validate(),!s.hasErrors&&s.post("/roles",{onSuccess:()=>{s.reset(),B.success("Role created successfully")},onError:K,onErrors:O})};return(f,o)=>(d(),_(g,null,[c("form",{id:"role-form",onSubmit:V(R,["prevent"]),class:"mb-4 grid grid-cols-2 gap-x-5 gap-y-5"},[e(h,{id:"name",name:"name",label:"Role Name",placeholder:"Enter role name","error-message":a(s).errors.name},null,8,["error-message"]),e(h,{id:"description",name:"description",label:"Role Description",placeholder:"Enter role description","error-message":a(s).errors.description},null,8,["error-message"]),c("div",W,[e(a(j),{class:"mb-2 block text-base font-medium"},{default:r(()=>o[0]||(o[0]=[n("Permissions")])),_:1}),c("div",X,[e(J,null,{default:r(()=>[e(H,{class:"bg-primary-foreground"},{default:r(()=>[e(x,null,{default:r(()=>[e(k,{class:"text-left"},{default:r(()=>o[1]||(o[1]=[n("Permission")])),_:1}),e(k,{class:"text-left"},{default:r(()=>o[2]||(o[2]=[n("Action")])),_:1})]),_:1})]),_:1}),e(I,null,{default:r(()=>[(d(),_(g,null,C(m,(i,U)=>e(x,{key:i.id,class:D(U%2===0?"bg-secondary dark:bg-hover":"")},{default:r(()=>[e(w,{class:"flex gap-3"},{default:r(()=>[n(b(i.name)+" ",1),i.description?(d(),S(z,{key:0,align:"end",description:i.description},null,8,["description"])):F("",!0)]),_:2},1024),e(w,null,{default:r(()=>{var p;return[e(a(G),{id:`permission-${i.id}`,checked:(p=a(s).permissions.find(l=>l.id===i.id))==null?void 0:p.granted,"onUpdate:checked":l=>{const u=a(s).permissions.find(q=>q.id===i.id);u&&(u.granted=l)}},null,8,["id","checked","onUpdate:checked"])]}),_:2},1024)]),_:2},1032,["class"])),64)),e(L,{message:a(s).errors.permissions},null,8,["message"])]),_:1})]),_:1})])])],32),e(T,{type:"submit",form:"role-form",loading:a(s).processing,disabled:a(s).processing},{default:r(()=>[n(b(y.value?"Update":"Create")+" Role ",1)]),_:1},8,["loading","disabled"])],64))}});export{ne as _};
